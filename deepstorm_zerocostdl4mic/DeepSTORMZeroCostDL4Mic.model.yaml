format_version: 0.3.0

name: Deep-STORM
description: A trained Deep-STORM model for image reconstruction from high-density single-molecule localization microscopy (SMLM).
date: 2020
cite:
  - text: Nehme E. et al., Optica 2018
    doi: https://doi.org/10.1364/OPTICA.5.000458
  - text: Lucas von Chamier et al. biorXiv 2020
    doi: https://doi.org/10.1101/2020.03.20.000133
authors:
  - ZeroCostDL4Mic team
  - DeepImageJ team
git_repo: https://github.com/HenriquesLab/ZeroCostDL4Mic
documentation: https://deepimagej.github.io/deepimagej/
covers: [./input.png, ./output.png]
tags:
 - zerocostdl4mic
 - deepimagej
 - SMLM
 - image reconstruction
 - super-resolution

license: MIT
language: Java
framework: Tensorflow
source: ./saved_model.pb
sha256: 2078de7c4189a4df6794584f2cf01ac83a157d3f32a48563687c8bbb1e6ad5dd
weights:
  - id: v1
    description: Weights trained using simulated data from Nehme E. et al., Optica 2018
    source: ./weights_v1.zip
    sha256: 4c654653777682e057fe8c2ecc154ac9a6907f4f728e10e143499bd76b0683ca
    test_inputs: ./exampleImage.tiff
    test_outputs: ./resultImage.tiff
    documentation: https://github.com/EliasNehme/Deep-STORM/tree/master/demo%201%20-%20Simulated%20Microtubules

inputs:
  - name: raw
    axes: byxc
    data_type: float32
    data_range: [-inf, inf]
    shape: [1, 512, 512, 1]
    preprocessing: {name: unit_clipped_zero_mean_unit_var, kwargs: {mean: 0.1896, std: 0.1814}}

outputs:
  - name: localizations
    axes: byxc
    data_type: float32
    data_range: [-inf, inf]
    halo: [0, 0, 0, 0]
    shape:
        reference_input: raw
        scale: [1, 1, 1, 1]
        offset: [0, 0, 0, 0]

config:
# custom config for DeepImageJ, see https://github.com/bioimage-io/configuration/issues/23
  deepimagej:
    pyramidal_model: false
    allow_tiling: true
    model_keys:
      model_tag: tf.saved_model.tag_constants.SERVING
      signature_definition: tf.saved_model.signature_constants.DEFAULT_SERVING_SIGNATURE_DEF_KEY
    test_information:
      inputs:
      - name: ./exampleImage.tiff
      	size: [512, 512, 1, 1]
	pixel_size:
      x: 0.1 µm
      y: 0.1 µm
      z: 1.0 pixel
      outputs:
      - name: ./normalizedConfidence.tiff
      	type: image
      	size: [64, 64, 1, 1]
      - name: ./filteredConfidence.tiff
      	type: image
      	size: [64, 64, 1, 1]
      - name: ./Localizations_resultImage_max.csv
        type: ResultsTable
        size: [120, 3]
      memory_peak: 328.1 Mb
      runtime: 0.9 s
    prediction:
      preprocess:
      -   spec: ij.IJ::runMacroFile
          kwargs: preprocessing.ijm
      postprocess:
      -   spec: ij.IJ::runMacroFile
          kwargs: postprocessing_LocalMaximaSMLM.ijm
